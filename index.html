<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Github Page demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="index.css" />
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
</head>
<body>
    <div id="main-content">
        <button onclick="configWx()">config wx</button>
        <div>separatore.....</div>
        <button onclick="openScan()">open scan</button>
    </div>

    <script>
        function configWx(){
            console.log('begin config wx')
            const data = {
  debug: true,
  appId: 'wx57c03b14839de67d',
  timestamp: 162919595,
  nonceStr: 'TiScrRNjMJJuxQu',
  signature: '1405ce6c83947b2f4698b99d758ccfaf6e102a9c',
  jsApiList: [ 'scanQRCode' ]
}

            alert(JSON.stringify(data))

            wx.config(data)

            
            wx.ready(() => {
                // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。
                console.log('wx config success')
            })
        }

        function openScan() {
            console.log('click open the scan')
            wx.scanQRCode({
                needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
                scanType: ['qrCode', 'barCode'], // 可以指定扫二维码还是一维码，默认二者都有
                success(res) {
                    const result = res.resultStr // 当needResult 为 1 时，扫码返回的结果
                    console.log(result);
                    alert(result)
                },
            })
        }

    </script>
</body>